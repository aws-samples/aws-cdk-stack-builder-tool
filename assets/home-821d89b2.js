import{j as e,r as n,u as D}from"./index-332eb9ee.js";import{U as x,D as S,p as N,t as w,_ as I,X as L,P as _,i as y}from"./transition-5e625909.js";function A(){return e.jsx("footer",{className:"pt-4",children:e.jsx("div",{className:"max-w-7xl flex items-center justify-between",children:e.jsx("div",{children:e.jsxs("p",{className:"text-center text-base text-gray-400",children:["View documentation on ",e.jsx("a",{href:"https://github.com/aws-samples/aws-cdk-stack-builder-tool",target:"_blank",className:"text-gray-500",rel:"noreferrer",children:"github.com/aws-samples/aws-cdk-stack-builder-tool"})]})})})})}function H({title:t,titleId:r,...a},s){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:s,"aria-labelledby":r},a),t?n.createElement("title",{id:r},t):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"}))}const U=n.forwardRef(H),K=U;function V(t){const r=n.useCallback(s=>{t.setSelectedBlueprintId(s)},[t]),a=t.limit?t.blueprints.slice(0,t.limit):t.blueprints;return e.jsx("ul",{className:x.classNames("grid gap-6",t.multicolumn?"grid-cols-1 lg:grid-cols-2":"grid-cols-1"),children:a.map(s=>e.jsx("li",{className:"flow-root",children:e.jsxs("div",{className:x.classNames("cursor-pointer border border-transparent relative -m-2 p-2 flex items-center space-x-4 rounded-xl hover:bg-gray-50 focus-within:ring-2 focus-within:ring-indigo-500",s.id===t.selectedBlueprintId?"border-indigo-300 bg-gray-50":"hover:border-gray-200"),onClick:()=>r(s.id),children:[e.jsx("div",{className:"flex-shrink-0 flex items-center justify-center h-16 w-16 rounded-lg",style:{backgroundColor:s.background||"#000000"},children:s.icon?e.jsx("img",{alt:"icon",className:"h-6 w-6",src:`data:image/svg+xml;base64,${s.icon}`}):e.jsx(K,{className:"h-6 w-6 text-white","aria-hidden":"true"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-900",children:[e.jsx("span",{className:"absolute inset-0","aria-hidden":"true"}),s.name||"Untitled"]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:s.description||e.jsx(e.Fragment,{children:" "})})]})]})},s.id))})}const E="blueprints";class z{async save(r){if(r.kind!=="cdk/project-blueprint")throw new Error("Invalid blueprint");if(!r.id)throw new Error("Invalid blueprint id");await S.set(E,r.id,r)}async load(){const r=await S.values(E),a=[];for(const s of r)try{a.push(s)}catch(l){console.error(l)}return[...N,...a]}async delete(r){await S.del(E,r)}}const F=new z;function W(t){const r=n.useRef(null),a=n.useRef(null),[s,l]=n.useState(t.selectedBlueprintId),d=n.useCallback(()=>{t.setSelectedBlueprintId(s),t.setOpen(!1)},[t,s]),f=n.useCallback(()=>{const o=a.current;if(!o)return;const u=(o.files||[])[0];if(!u)return;const g=new FileReader;g.onload=async()=>{const p=g.result;if(typeof p!="string")throw new Error("Unexpected result type");try{const m=JSON.parse(p);await F.save(m),t.setBlueprints([...t.blueprints.filter(C=>C.id!==m.id),m])}catch(m){alert("Invalid blueprint file"),console.error(m)}o.value=""},g.onerror=()=>{console.log(g.error),o.value=""},g.readAsText(u)},[t]),k=n.useCallback(async()=>{F.delete(s);const o=await F.load();t.setBlueprints(o);const u=t.resetSelect();l(u)},[t,s]),h=s&&s.length>0;return e.jsx(w.Root,{show:t.open,as:n.Fragment,children:e.jsxs(I,{as:"div",className:"relative z-10",onClose:t.setOpen,initialFocus:r,children:[e.jsx(w.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),e.jsx("div",{className:"fixed z-10 inset-0 overflow-y-auto",children:e.jsx("div",{className:"flex items-end sm:items-center justify-center min-h-full p-4 text-center sm:p-0",children:e.jsx(w.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:e.jsxs(I.Panel,{className:"relative bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all my-8 pt-5 max-w-2xl w-full",children:[e.jsxs("div",{className:"flex justify-between content-center mb-2 px-4",children:[e.jsx("div",{className:"ml-2",children:e.jsx(I.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900",children:e.jsx("div",{children:"Blueprints"})})}),e.jsxs("button",{type:"button",className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",tabIndex:-1,onClick:()=>t.setOpen(!1),children:[e.jsx("span",{className:"sr-only",children:"Close"}),e.jsx(L,{className:"h-6 w-6","aria-hidden":"true"})]})]}),e.jsx("div",{className:"min-w-[30vw] min-h-[30vh] max-h-[60vh] overflow-y-scroll px-6 py-4",children:e.jsx(V,{multicolumn:!1,selectedBlueprintId:s,blueprints:t.blueprints,setSelectedBlueprintId:l})}),e.jsx("input",{type:"file",className:"hidden",onChange:f,ref:a,accept:".json"}),e.jsxs("div",{className:"bg-gray-50 py-3 px-6 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("button",{className:"inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",onClick:()=>{var o;return(o=a.current)==null?void 0:o.click()},children:"Import blueprint..."}),e.jsx("button",{className:x.classNames(!h||t.staticBlueprints.includes(s)?"hidden":"","ml-2 inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),onClick:k,children:"Remove"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("button",{type:"button",className:x.classNames("ml-4 flex-shrink-0 px-4 py-2 border text-sm font-medium rounded-md shadow-sm",h?"border-transparent bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 text-white":"border-gray-300 bg-white text-gray-700"),disabled:!h,onClick:d,children:"Select"}),e.jsx("button",{type:"button",className:"inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 mt-0 ml-3 w-auto text-sm",onClick:()=>t.setOpen(!1),ref:r,children:"Cancel"})]})]})]})})})})]})})}const b="MyApplication",v=new _,X=new z,P=N.length>0?N[0].id:"",R=6;function q(){const t=D(),[r,a]=n.useState(!1),[s,l]=n.useState(P),[d,f]=n.useState([]),[k]=n.useState(N.map(i=>i.id)),[h,o]=n.useState(b),[u,g]=n.useState(!0);n.useEffect(()=>{(async()=>{if(await v.exists(b)){let c=1;for(;await v.exists(`${b}${c}`);)c++;o(`${b}${c}`)}})()},[o]),n.useEffect(()=>{(async()=>{const i=await X.load();f(i)})()},[f]);const p=n.useCallback(()=>(l(P),P),[]),m=n.useCallback(async()=>{if(!u)return;const i=d.find(c=>c.id===s);if(!i)throw new Error(`Blueprint not found: ${s}`);await v.create(h,i),t(`/projects/${h}`)},[u,d,h,t,s]),C=n.useCallback(i=>{const c=i.target.value;(async()=>{let j=i.target.checkValidity();j&&(j=!await v.exists(i.target.value.trim())),o(c),g(j)})()},[o,g]),M=n.useCallback(i=>{i.key==="Enter"&&m()},[m]),O=n.useCallback(i=>{let c=[...d];const j=c.find(T=>T.id===i);if(!j)throw new Error(`Blueprint with id ${i} not found`);const B=c.indexOf(j);B>=R&&x.moveArrayElement(c,j,-(B-R+1)),l(i),f(c)},[d]);return e.jsxs("section",{children:[e.jsx(W,{open:r,setOpen:a,selectedBlueprintId:s,setSelectedBlueprintId:O,blueprints:d,staticBlueprints:k,setBlueprints:f,resetSelect:p}),e.jsxs("div",{className:"bg-white shadow rounded-lg",children:[e.jsx("div",{className:"px-5 py-4 h-28",children:e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("label",{htmlFor:"project_name",className:"block text-lg font-medium text-gray-900",children:"Project Name"}),e.jsx("div",{className:"mt-1",children:e.jsx("input",{type:"text",name:"project_name",id:"project_name",required:!0,maxLength:40,pattern:"[\\p{L}_][\\p{L}0-9_]*",autoComplete:"off",className:x.classNames("shadow-sm w-full block sm:text-sm border-gray-300 rounded-md invalid:border-red-500 focus:invalid:border-red-500 focus:invalid:ring-red-500",u?"focus:ring-indigo-500 focus:border-indigo-500":"focus:border-red-500 focus:ring-red-500 border-red-500"),placeholder:"Project Name",value:h,onChange:C,onKeyDown:M})})]}),e.jsx("button",{className:x.classNames("ml-4 flex-shrink-0 px-4 py-2 border text-sm font-medium rounded-md shadow-sm ",u?"border-transparent bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 text-white":"border-gray-300 bg-white text-gray-700"),disabled:!u,onClick:m,children:"Create a project"})]})}),e.jsxs("div",{className:"border-t border-gray-200 py-6 px-6",children:[e.jsx(V,{multicolumn:!0,selectedBlueprintId:s,setSelectedBlueprintId:O,blueprints:d,limit:R}),e.jsx("div",{className:"mt-8 flex",children:e.jsxs("button",{className:"text-sm font-medium text-indigo-600 hover:text-indigo-500",onClick:()=>a(!0),children:["Or browse full blueprint gallery",e.jsx("span",{"aria-hidden":"true",children:" →"})]})})]})]}),e.jsx(A,{})]})}function G(){return e.jsxs("div",{className:"flex items-center space-x-5",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"relative",children:e.jsx("img",{className:"h-16 w-16",src:"/icons/192x192.png",alt:""})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"AWS CDK Builder"}),e.jsx("p",{className:"text-sm font-medium text-gray-500",children:"CDK Project Bootstrapping"})]})]})}function J({title:t,titleId:r,...a},s){return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",ref:s,"aria-labelledby":r},a),t?n.createElement("title",{id:r},t):null,n.createElement("path",{fillRule:"evenodd",d:"M10.5 6a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm0 6a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0zm0 6a1.5 1.5 0 113 0 1.5 1.5 0 01-3 0z",clipRule:"evenodd"}))}const Y=n.forwardRef(J),Q=Y;function Z(){return e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:e.jsx("path",{vectorEffect:"non-scaling-stroke",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No projects"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating a new project."})]})}const $=new _;function ee(){const[t,r]=n.useState([]);n.useEffect(()=>{(async()=>{const l=await $.listStored();r(l)})()},[r]);const a=n.useCallback(async(l,d)=>{if(l.stopPropagation(),window.confirm(`Do you want to delete "${d}"?`)){await $.delete(d);const f=await $.listStored();r(f)}},[r]),s=t.length>0;return e.jsx("section",{children:e.jsxs("div",{className:"bg-white shadow rounded-lg h-full grid grid-rows-[auto_1fr]",children:[e.jsx("div",{className:"px-5 h-28 flex items-center",children:e.jsxs("div",{children:[e.jsx("h2",{id:"applicant-information-title",className:"text-lg leading-6 font-medium text-gray-900",children:"Your Projects"}),e.jsx("p",{className:"mt-1 max-w-2xl text-sm text-gray-500",children:"Choose existing project. All projects are saved on the local machine."})]})}),e.jsxs("div",{className:x.classNames("border-t border-gray-200 py-5 px-4 overflow-y-scroll h-[65vh] max-h-[1000px]",s?"":"flex items-center justify-center"),children:[!s&&e.jsx(Z,{}),e.jsx("div",{className:"space-y-2",children:t.map(l=>e.jsx(te,{projectName:l,onDeleteClick:a},l))})]})]})})}function te(t){const r=D(),a=n.useCallback(()=>{r(`/projects/${t.projectName}`)},[r,t.projectName]);return e.jsx("div",{className:"flex items-center cursor-pointer",onClick:a,children:e.jsxs("div",{className:"inline-flex justify-between items-center w-full px-3 py-4 border border-gray-100 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[t.projectName,e.jsxs(y,{as:"div",className:"relative inline-block text-left",children:[e.jsx("div",{children:e.jsxs(y.Button,{className:"flex items-center text-gray-400 hover:text-gray-600 focus:outline-none",onClick:s=>s.stopPropagation(),children:[e.jsx("span",{className:"sr-only",children:"Open options"}),e.jsx(Q,{className:"h-5 w-5","aria-hidden":"true"})]})}),e.jsx(w,{as:n.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:e.jsx(y.Items,{className:"origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10",children:e.jsx("div",{className:"py-1",children:e.jsx(y.Item,{children:({active:s})=>e.jsx("button",{className:x.classNames("block px-4 py-2 text-sm w-full text-left",s?"bg-gray-100 text-gray-900":"text-gray-700"),onClick:l=>t.onDeleteClick(l,t.projectName),children:"Delete"})})})})})]})]})})}function re(){return e.jsx("div",{className:"bg-gray-100 min-h-full",children:e.jsxs("div",{className:"min-h-full max-w-7xl mx-auto pt-12 xl:px-0 px-8",children:[e.jsx(G,{}),e.jsxs("div",{className:"grid grid-cols-[auto] md:grid-cols-[2fr_1fr] gap-6 mt-8 pb-10",children:[e.jsx(q,{}),e.jsx(ee,{})]})]})})}export{re as default};
